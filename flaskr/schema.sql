DROP TABLE IF EXISTS stest;
DROP TABLE IF EXISTS ptest;

CREATE TABLE IF NOT EXISTS hunet_members  (
  id INTEGER PRIMARY KEY NOT NULL,
  dept_name TEXT NOT NULL,
  emp_no TEXT NOT NULL,
  name TEXT NOT NULL,
  password TEXT NOT NULL,
  pchanged INTEGER NOT NULL,
  updated INTEGER NOT NULL,
  EI REAL NOT NULL,
  SN REAL NOT NULL,
  TF REAL NOT NULL,
  JP REAL NOT NULL
);


CREATE TABLE stest (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  author_id TEXT NOT NULL,
  created TIMESTAMP NOT NULL DEFAULT (strftime('%Y-%m-%d %H:%M:%S', 'now', '+9 hours')),
  route TEXT UNIQUE NOT NULL,
  new_tag INTEGER NOT NULL,
  q1 INTEGER NOT NULL,
  q2 INTEGER NOT NULL,
  q3 INTEGER NOT NULL,
  q4 INTEGER NOT NULL,
  q5 INTEGER NOT NULL,
  q6 INTEGER NOT NULL,
  q7 INTEGER NOT NULL,
  q8 INTEGER NOT NULL,
  q9 INTEGER NOT NULL,
  q10 INTEGER NOT NULL,
  q11 INTEGER NOT NULL,
  q12 INTEGER NOT NULL,
  q13 INTEGER NOT NULL,
  q14 INTEGER NOT NULL,
  q15 INTEGER NOT NULL,
  q16 INTEGER NOT NULL,
  q17 INTEGER NOT NULL,
  q18 INTEGER NOT NULL,
  q19 INTEGER NOT NULL,
  q20 INTEGER NOT NULL,
  q21 INTEGER NOT NULL,
  q22 INTEGER NOT NULL,
  q23 INTEGER NOT NULL,
  q24 INTEGER NOT NULL,
  q25 INTEGER NOT NULL,
  q26 INTEGER NOT NULL,
  q27 INTEGER NOT NULL,
  q28 INTEGER NOT NULL,
  q29 INTEGER NOT NULL,
  q30 INTEGER NOT NULL,
  q31 INTEGER NOT NULL,
  q32 INTEGER NOT NULL,
  q33 INTEGER NOT NULL,
  q34 INTEGER NOT NULL,
  q35 INTEGER NOT NULL,
  q36 INTEGER NOT NULL,
  q37 INTEGER NOT NULL,
  q38 INTEGER NOT NULL,
  q39 INTEGER NOT NULL,

  guess_MBTI_EI REAL NOT NULL,
  guess_MBTI_SN REAL NOT NULL,
  guess_MBTI_TF REAL NOT NULL,
  guess_MBTI_JP REAL NOT NULL,


  FOREIGN KEY (author_id) REFERENCES user (id)

);

CREATE TABLE ptest (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  author_id TEXT NOT NULL,
  target_id TEXT NOT NULL,
  created TIMESTAMP NOT NULL DEFAULT (strftime('%Y-%m-%d %H:%M:%S', 'now', '+9 hours')),
  route TEXT UNIQUE NOT NULL,
  new_tagp INTEGER NOT NULL,
  new_tags INTEGER NOT NULL,
  q1 INTEGER NOT NULL,
  q2 INTEGER NOT NULL,
  q3 INTEGER NOT NULL,
  q4 INTEGER NOT NULL,
  q5 INTEGER NOT NULL,
  q6 INTEGER NOT NULL,
  q7 INTEGER NOT NULL,
  q8 INTEGER NOT NULL,
  q9 INTEGER NOT NULL,
  q10 INTEGER NOT NULL,
  q11 INTEGER NOT NULL,
  q12 INTEGER NOT NULL,
  q13 INTEGER NOT NULL,
  q14 INTEGER NOT NULL,
  q15 INTEGER NOT NULL,
  q16 INTEGER NOT NULL,
  q17 INTEGER NOT NULL,
  q18 INTEGER NOT NULL,
  q19 INTEGER NOT NULL,
  q20 INTEGER NOT NULL,
  q21 INTEGER NOT NULL,
  q22 INTEGER NOT NULL,
  q23 INTEGER NOT NULL,
  q24 INTEGER NOT NULL,
  q25 INTEGER NOT NULL,
  q26 INTEGER NOT NULL,
  q27 INTEGER NOT NULL,
  q28 INTEGER NOT NULL,
  q29 INTEGER NOT NULL,
  q30 INTEGER NOT NULL,
  q31 INTEGER NOT NULL,
  q32 INTEGER NOT NULL,
  q33 INTEGER NOT NULL,
  q34 INTEGER NOT NULL,
  q35 INTEGER NOT NULL,
  q36 INTEGER NOT NULL,
  q37 INTEGER NOT NULL,
  q38 INTEGER NOT NULL,
  q39 INTEGER NOT NULL,

  sresp1 TEXT NOT NULL,
  sresp2 TEXT NOT NULL,
  sresp3 TEXT NOT NULL,
  sresp4 TEXT NOT NULL,
  sresp5 TEXT NOT NULL,

  guess_MBTI_EI REAL NOT NULL,
  guess_MBTI_SN REAL NOT NULL,
  guess_MBTI_TF REAL NOT NULL,
  guess_MBTI_JP REAL NOT NULL,

  FOREIGN KEY (author_id) REFERENCES user (id)
);

